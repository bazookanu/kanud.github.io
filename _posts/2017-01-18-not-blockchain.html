---
layout: post
title: Bitcoin, not Blockchain
---

<p>Bitcoin is a system to order transactions. Currently, it has a grand throughput of 7 transactions per second (any more and they'll get queued). In the medium term at least, the throughput of Bitcoin is limited by the number of transactions a single server (or node) can handle.</p>
<h3>Why does anyone want Bitcoin?</h3>
<p>Even worse, a Bitcoin node collects all transactions of all nodes and stores the entire transaction history (currently taking up over 100GB of space). If the throughput is limited by a single node anyway, why not have a single server that serializes all the transactions in the network? </p> 
<p>We can't do that, because Bitcoin has the following goals (stated imprecisely):<ol> 
<li>Anyone can join the network as a node</li>
<li>No single node is in charge</li></ol>
</p>
<p>Even these vague conditions immediately present problems:<ol>
<li>The number of nodes could grow without bounds. Nodes could go offline at will.</li>
<li>The nodes could be anywhere in the world, with good or poor network connections. There are no guarantees on when (if at all) a node gets a message sent by another node.</li>
<li>Nodes could actively try to attack the network</li>
<li>Honest nodes should be able to come to a consensus on the order of transactions without having to trust another node</li></ol> 
<p>If you're wondering why anyone would want such a system, <a href="https://twitter.com/ButtCoin">join the club</a>. Bitcoin is largely associated with libertarians, cyberphunks, ransomware, drugs, traders, the Winklewii and China. It's probably an interesting exercise to understand what makes Bitcoin attractive this eclectic bunch.</p>

<h3>Double spending</h3>
<p>It's easy to ensure that a node only spend money it owns (or used to own), and is unable to spend money owned by others thanks to the wonders of public key cryptography. The main problem Bitcoin solves is that of double spending. Someone could try to spend the same money twice, by telling nodes conflicting transactions. Let's try to work out how we could solve this. <ol>
<li><p>As we trust no single node, we must have the entire transaction history. Great, so we'll have all nodes broadcast all transactions, hoping all transactions will eventually reach all nodes.</p>
<p>Now we have a new problem. Broadcasts are lost and delayed, so nodes have differing versions of transactions. Even worse, we have Mallory. Mallory has only 1 coin. He has told some nodes that he is sending that coin to Alice, and others that he is sending it to Bob.</p></li>
<li><p>Clearly, we need to stop the system periodically and try to agree on what transactions happened in the last period. We could chunk a set of transactions into a block A, and mandate that the next block include a reference to block A. Now we have serialized transactions: those in block A happened before block B. One of Mallory's transactions would end up in block A, and the other one would create a conflict and be discarded when block B comes around.</p>
<p>As we trust no node, let's randomly elect a node every period to create a block. This gives all nodes a theoretical chance to initiate consensus. The leader creates a block with the transactions she has, and broadcasts the block to all nodes. The nodes check if the transactions are valid with respect to the last block they have (everyone only spending money they own). Each node verifies that the block has non-conflicting transactions. If they don't have some information needed to verify this, they ask other nodes for it.</p><p> If it all checks out, they store that block locally. When they become the leader, their new block will have a reference to the last valid block they have. AKA, <b>the blockchain</b>: a transition from state to state, the transformations happening via transactions.</p></li>
<li><p>How can we just elect a leader, you might wonder. If the nodes could cooperate to elect a leader, they might as well cooperate to agree on transaction order. So we do the next best thing- have all the nodes toss imaginary coins. The one who gets, say, 100 heads in a row becomes the leader.</p> 
<p>This is a highly improbable event, so we know it's unlikely that two nodes become the leader at the same time. If it does happen, we could always have the next leader resolve the inconsistency</p>
<p>We need some kind of proof that a node claiming to be the leader indeed tossed many coins and got 100 in a row. That's what we call <b>proof of work</b>. In reality, nodes don't actually toss virtual coins- they find a particular kind of solution to a function- like solving a puzzle. Finding the solution is an improbable event that requires lots of time and computation.</p>
<p>We mandate that nodes choose the longest blockchain. The longest blockchain has had the most elections, therefore the most secure. Recall that the blocks are linked. To change a block, you would have to change all the blocks that follow it. The longer the blockchain, the more puzzles you need to solve to get people to switch to your chain. Hence the more blocks that come after a certain block, the unlikelier it is that the block will be changed.</p></li></ol>
<p>The general idea we have above solves our problem. Well, not really. Why would a node even bother to do all the work to come up with the proof of work? Or worse, what if someone has a vested interest in being selected leader all the time? He could buy a bunch of fast servers and solve more puzzles. You could argue that other participants in the network would do the same, but we do have a problem. We need some guaranteed incentive for a node to solve the puzzles and help secure the system. That is the real genius behind Bitcoin.</p>
<h3>Incentives</h3>
<p>For the final rule of the protocol, we will award the leader with some money, as a reward for her hard work. The leader is incentivized to be good. If she does bad things like create invalid blocks or work on shorter blockchains, she simply won't get the reard.</p><ul>
<li><p>Where does this money come from?</p>
<p>We created it out of thin air. We call them Bitcoin. </p></li>
<li><p>If you created it out of thin air, why would it even have value? Who would ever accept this as money?</p>
<p>We concluded that the leader needs to be rewarded for her work. She is doing something truly useful: securing the Bitcoin system, helping serialize transactions. That's precisely the recursive logic we employ to give Bitcoin value: the value of Bitcoin indicates the useful work that our leader did.</p></li>
<li><p>Um, what?</p>
<p> Why does gold have value? It's somewhat pretty, but so are <a href="https://www.google.com/search?q=kaleidoscope">kaliedoscopes</a>, but they have little value. Gold has value because people can easily believe it has value. The dollar has value because people believe in the USA / Federal Reserve. The belief in gold used to have straightforward reasons: you could melt and cut it up as much as you wanted, it didn't spoil or rust, and it was easy to detect impurity. Most importantly, it was rare and you needed luck or resources to find it. It was proof of work! The reasons behind believing in the Fed are more complicated. Game theory is a word often thrown around as an explanation, you'll have to look it up.</p></li></ul>

<h3> Bitcoin! Bitcoin, not blockchain.</h3>
<p>There you go, now you know more than the average blockchain pundit who promises 'blockchain' will change the world. After reading this, what do you think the most important part of our system is? Incentives? Cryptography? The data structure we chose to use, aka the blockchain? Clearly, a statement that begins with, 'Blockchain, the underlying technology of Bitcoin', is gramatically incorrect; it's a blockchain, not blockchain. Secondly, the statement almost as ridiculous as saying, 'Array, the underlying technology of a computer', or 'key value store, the underlying technology of Facebook'.</p>
<p>Indeed, the blockchain is not the only data structure that we could have used. There are <a href="https://eprint.iacr.org/2013/881.pdf">proposals</a> for using a directed acyclic graph instead, and <a href="https://www.ethereum.org/">cryptocurrencies that do the same</a>. It is possible that the system that finally changes the world as promised by the blockchain pundit won't have a blockchain at all.</p>
<p>Given my rather blase presentation of Bitcoin, you might be wondering how it can change the world. Or why a decentralized system like Bitcoin would ever be better than a centralized system. After all, almost all of us trust Visa, Paypal and the government with our transactions. If you follow the news, you might be wondering why companies like IBM are coming up with things like <a href="https://www.hyperledger.org/">Hyperledger</a>. How could a self-governing system (like Bitcoin) possibly interest a for-profit, centralized by definition, conservative (I doubt IBM is full of cyberphunks and libertarians) company? Stay tuned for my next article.</p>